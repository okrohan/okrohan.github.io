!function(e){function t(t){for(var i,s,a=t[0],l=t[1],c=t[2],d=0,h=[];d<a.length;d++)s=a[d],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&h.push(r[s][0]),r[s]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(e[i]=l[i]);for(S&&S(t);h.length;)h.shift()();return n.push.apply(n,c||[]),o()}function o(){for(var e,t=0;t<n.length;t++){for(var o=n[t],i=!0,a=1;a<o.length;a++){var l=o[a];0!==r[l]&&(i=!1)}i&&(n.splice(t--,1),e=s(s.s=o[0]))}return e}var i={},r={0:0},n=[];function s(t){if(i[t])return i[t].exports;var o=i[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,s),o.l=!0,o.exports}s.m=e,s.c=i,s.d=function(e,t,o){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(s.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)s.d(o,i,function(t){return e[t]}.bind(null,i));return o},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="";var a=window.webpackJsonp=window.webpackJsonp||[],l=a.push.bind(a);a.push=t,a=a.slice();for(var c=0;c<a.length;c++)t(a[c]);var S=l;n.push([551,1]),o()}({1469:function(e,t,o){"use strict";var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(t,"__esModule",{value:!0});var n=o(264),s=o(1470),a={active:!0,visible:!0,key:"GameScene"},l=function(e){function t(){var t=e.call(this,a)||this;return t.handleWorldCollision=function(){t.player.body.blocked.down&&t.handleDeath()},t.handleDeath=function(){t.gameState.gameStarted&&(t.gameState={},t.cameras.main.flash(500),t.cameras.main.shake(500,.05,!0,(function(e,o){t.initGameState(),t.sound.stopAll(),1===o&&t.scene.restart()})))},t.handleCollect=function(e,o){t.gameState.currentScore+=1,t.gameState.scoreText.setText(t.getScoreText()),t.sound.play("coin_music",{volume:.2}),o.destroy()},t.handleGroundCollide=function(){t.gameState.playerOnGround=0},t.initGameState(),t}return r(t,e),t.prototype.initGameState=function(){this.gameState={gameStarted:!1,playerOnGround:0,currentScore:0,timeText:null,livesText:null}},t.prototype.preload=function(){var e=this,t=this.add.graphics(),o=this.add.text(window.innerWidth/2,290,"").setFontSize(32).setFill("white");this.load.on("progress",(function(e){t.clear(),t.fillStyle(16777215,1),t.fillRect(0,270,window.innerWidth*e,60),e>.5&&o.setFill("black"),o.setText(parseInt(100*e)+"%")})),this.load.on("complete",(function(){t.destroy(),o.destroy()})),this.levelLayout=s.getLevel(),Object.keys(n.ASSETS_NAMES).forEach((function(t){return e.load.image(t.toLowerCase(),"assets/"+t.toLowerCase()+".png")})),Object.values(n.ASSETS_NAMES.GROUND).forEach((function(t){n.ASSET_WIDTH_MAPPING.GROUND[t]&&e.load.spritesheet(t,"assets/"+n.ASSETS_NAMES.GROUND.GROUND+".png",{frameWidth:n.ASSET_WIDTH_MAPPING.GROUND[t]})})),this.load.audio("background_music","assets/background_music.mp3"),this.load.audio("jump_music","assets/jump.wav"),this.load.audio("coin_music","assets/coin.mp3")},t.prototype.createPlayer=function(){this.player=this.physics.add.sprite(this.levelLayout.playerStart.x,this.levelLayout.playerStart.y,n.ASSETS_NAMES.PLAYER,null).setScale(n.ASSET_SCALE_MAPPING[n.ASSETS_NAMES.PLAYER]),this.player.setCollideWorldBounds(!0),this.player.setBounce(1,.4),this.player.setMaxVelocity(250)},t.prototype.createLevel=function(){for(var e=this,t=this.physics.add.staticGroup(),o=this.physics.add.staticGroup(),i=0;i<30;i++){var r=Phaser.Math.RND.between(400,this.levelLayout.width),s=Phaser.Math.RND.between(50,400);o.create(r,s,n.ASSETS_NAMES.CLOUD).setScale(n.ASSET_SCALE_MAPPING[n.ASSETS_NAMES.CLOUD])}o.setAlpha(.3).setDepth(0).setBlendMode(0),this.levelLayout.platforms.forEach((function(e){var o=e.x,i=e.y,r=e.key;t.create(o,i,r).setScale(n.ASSET_SCALE_MAPPING[r]||1).refreshBody()})),this.levelLayout.tiles.forEach((function(o){var i=o.x,r=o.width,s=o.y,a=o.height,l=void 0===a?150:a;return t.add(e.add.tileSprite(i,s,r,l,n.ASSETS_NAMES.GROUND.GROUND))})),this.collectables=this.levelLayout.collectables.map((function(t){var o=t.key,i=t.x,r=t.y;return e.physics.add.sprite(i,r,o).setScale(n.ASSET_SCALE_MAPPING[o]||1).setCollideWorldBounds(!0)})),this.enemies=this.levelLayout.enemies.map((function(t){var o=t.key,i=t.x,r=t.y;return e.physics.add.sprite(i,r,o).setScale(n.ASSET_SCALE_MAPPING[o]||1)}));var a=this.levelLayout.finish;this.finish=this.physics.add.sprite(a.x,a.y,n.ASSETS_NAMES.FLAG).setScale(n.ASSET_SCALE_MAPPING[n.ASSETS_NAMES.FLAG]||1),this.enemies.push(this.finish),this.platforms=t,this.physics.add.collider(this.enemies,this.platforms),this.physics.add.collider(this.collectables,this.platforms),this.physics.add.collider(this.enemies,this.collectables),this.physics.add.collider(o,o,(function(e){return e.destroy()}))},t.prototype.initPlayerInteractors=function(){var e=this,t=[this.add.text(50,50,"BOiNK!",{fontSize:72,fontStyle:"bold",stroke:"black",strokeThickness:5,fill:"white"}),this.add.text(50,130,"Controls: ⬅[Left]  ➡[Right]  ⬆[Up]  ⬇[Down]",{fontSize:24,fontStyle:"bold",stroke:"black",strokeThickness:2,fill:"white"}),this.add.text(50,160,"Press 'Space' to Start ",{fontSize:24,fontStyle:"bold",stroke:"black",strokeThickness:2,fill:"white"})];this.player.body.onWorldBounds=!0,this.physics.world.on("worldbounds",this.handleWorldCollision),this.physics.add.collider(this.player,this.platforms,this.handleGroundCollide),this.physics.add.collider(this.player,this.enemies,this.handleDeath),this.physics.add.overlap(this.player,this.collectables,this.handleCollect),this.cameras.main.startFollow(this.player,!0,1,1),this.cursors.space.addListener("up",(function(){console.log("starting game"),e.gameState.gameStarted=new Date,t.forEach((function(e){return e.destroy()})),e.gameState.timeText=e.add.text(window.innerWidth-100,50,e.getTimeText(),{fontSize:20,fontStyle:"bold",stroke:"black",strokeThickness:2,fill:"white"}).setScrollFactor(0),e.gameState.livesText=e.add.text(window.innerWidth-100,20,"❤ 3",{fontSize:20,fontStyle:"bold",stroke:"black",strokeThickness:2,fill:"white"}).setScrollFactor(0),e.gameState.scoreText=e.add.text(20,20,e.getScoreText(),{fontSize:20,fontStyle:"bold",stroke:"black",strokeThickness:2,fill:"white"}).setScrollFactor(0),e.sound.play("background_music",{loop:!0,volume:.5}),e.cursors.space.removeListener("up")}))},t.prototype.create=function(){this.cameras.main.setBounds(0,0,this.levelLayout.width,this.scale.height),this.physics.world.setBounds(0,0,this.levelLayout.width,this.scale.height),this.cursors=this.input.keyboard.createCursorKeys(),this.createLevel(),this.createPlayer(),this.initPlayerInteractors()},t.prototype.getTimeText=function(){var e=s.getLevel().time-new Date(new Date-this.gameState.gameStarted).getSeconds();return parseInt(e/60)+":"+e%60},t.prototype.getScoreText=function(){return"Score : "+(this.gameState.currentScore||0)+"/"+this.collectables.length},t.prototype.handleMovement=function(){var e=this.cursors;e.up.isDown&&!this.gameState.playerOnGround&&(this.player.setVelocityY(n.PLAYER.VELOCITY_Y),this.gameState.playerOnGround=1,this.sound.play("jump_music",{volume:.05})),e.up.isDown&&this.gameState.playerOnGround<2&&this.player.body.velocity.y>0&&(this.player.setVelocityY(n.PLAYER.VELOCITY_Y),this.gameState.playerOnGround=2,this.sound.play("jump_music",{volume:.05})),e.left.isDown?(this.player.setAccelerationX(-n.PLAYER.ACCELERATION),this.player.setAngularVelocity(-n.PLAYER.ANGULAR_ACC)):e.right.isDown?(this.player.setAccelerationX(n.PLAYER.ACCELERATION),this.player.setAngularVelocity(n.PLAYER.ANGULAR_ACC)):this.gameState.playerOnGround?this.player.setAccelerationX(0):(this.player.setVelocityX(0),this.player.setAccelerationX(0),this.player.setAngularVelocity(0))},t.prototype.update=function(){this.gameState.gameStarted&&(this.handleMovement(),this.gameState.timeText.setText(this.getTimeText()))},t}(Phaser.Scene);t.GameScene=l},1470:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=o(1471);t.getLevel=function(){var e=window.level;return console.log(e),e?JSON.parse(e):i.default}},1471:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={height:757.6666666666667,width:2096.8814866067014,playerStart:{x:200,y:200,key:"player"},finish:{x:600,y:200,key:"flag"},platforms:[{x:238.5444960627327,y:319.7916666666667,key:"ground_tiny"},{x:532.2979802971895,y:420.83333333333337,key:"ground_small"},{x:878.1354156370465,y:422.9166666666667,key:"ground_medium"},{x:168.7520015814965,y:470.83333333333337,key:"ground_ohh_boi"}],tiles:[{x:1896.8814866067016,y:464.58333333333337,key:"ground",width:200},{x:1604.3816348719974,y:462.50000000000006,key:"ground",width:200}],enemies:[{x:528.1312642087576,y:361.45833333333337,key:"shiba"},{x:114.58469243188033,y:421.87500000000006,key:"spike"}],collectables:[{x:192.71061908998055,y:416.6666666666667,key:"star"},{x:914.3396593192975,y:337.5,key:"star"},{x:1529.7987216236697,y:354.1666666666667,key:"star"}]}},1472:function(e,t,o){"use strict";var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,o=1,i=arguments.length;o<i;o++)for(var r in t=arguments[o])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},s=this&&this.__spreadArrays||function(){for(var e=0,t=0,o=arguments.length;t<o;t++)e+=arguments[t].length;var i=Array(e),r=0;for(t=0;t<o;t++)for(var n=arguments[t],s=0,a=n.length;s<a;s++,r++)i[r]=n[s];return i};Object.defineProperty(t,"__esModule",{value:!0});var a=o(1473),l=o(264),c={active:!0,visible:!0,key:"GameEditorScene"},S={height:600,width:window.innerWidth,playerStart:{x:200,y:200,key:l.ASSETS_NAMES.PLAYER},finish:{x:600,y:200,key:l.ASSETS_NAMES.FLAG}},d=[l.ASSETS_NAMES.GROUND.GROUND],h=[l.ASSETS_NAMES.GROUND.TINY,l.ASSETS_NAMES.GROUND.SMALL,l.ASSETS_NAMES.GROUND.MEDIUM],u=[l.ASSETS_NAMES.SHIBA,l.ASSETS_NAMES.SPIKE],p=[l.ASSETS_NAMES.STAR],y=s([l.ASSETS_NAMES.GROUND.TINY,l.ASSETS_NAMES.GROUND.SMALL],d,[l.ASSETS_NAMES.SHIBA,l.ASSETS_NAMES.SPIKE,l.ASSETS_NAMES.STAR]),A=[l.ASSETS_NAMES.PLAYER,l.ASSETS_NAMES.FLAG],f=function(e){function t(){var t=e.call(this,c)||this;return t.removeSelected=function(){t.editorState.activeCursor&&!A.includes(t.editorState.activeCursor.data.get("key"))&&(t.editorState.activeCursor.destroy(),t.editorState.activeCursor=null),t.refreshAlphas()},t.handleAddNewSprite=function(){var e=t.createSprite({x:t.input.mousePointer.worldX,y:t.input.mousePointer.worldY,key:y[t.editorState.activeOption]});t.updateSpriteSelection(e)},t.generateLayout=function(){var e=t.sprites.reduce((function(e,t){if(!t.data)return e;e.width=Math.max(t.x+t.width,e.width,window.innerWidth),e.height=Math.max(t.y+t.height,e.height,600);var o=t.data.get("key");console.log(t.x,t.y,t.width,t.height,t,o);var i={x:t.x,y:t.y,key:o};return o===l.ASSETS_NAMES.PLAYER?e.playerStart=i:o===l.ASSETS_NAMES.FLAG?e.finish=i:u.includes(o)?e.enemies.push(i):p.includes(o)?e.collectables.push(i):h.includes(o)?e.platforms.push(i):d.includes(o)&&e.tiles.push(n(n({},i),{width:200})),e}),n(n({},S),{platforms:[],tiles:[],enemies:[],collectables:[],time:0}));return console.log("\n\n\n====",JSON.stringify(e,null,2)),e.time=20*e.collectables.length+60,e},t.generateAndDownload=function(){var e=t.generateLayout(),o="export default "+JSON.stringify(e,null,2),i=new Blob([o],{type:"ts"}),r=document.createElement("a");r.download="level",r.href=URL.createObjectURL(i),r.dataset.downloadurl=["ts",r.download,r.href].join(":"),r.style.display="none",document.body.appendChild(r),r.click(),document.body.removeChild(r),setTimeout((function(){URL.revokeObjectURL(r.href)}),1500)},t.generateAndPlay=function(){var e=t.generateLayout(),o=window.open(location.href.split("?")[0]);console.log("opened"),o.level=JSON.stringify(e),console.log("done")},t.positiveOrZero=function(e){return e>0?e:0},t.levelLayout=n({},S),t.editorState={activeOption:0,activeCursor:Phaser.GameObjects.Sprite},t.sprites=[],t}return r(t,e),t.prototype.refreshAlphas=function(){var e=this;this.sprites.forEach((function(t){t===e.editorState.activeCursor?t.setAlpha(1):t.setAlpha(.5)}))},t.prototype.updateOptionSelection=function(e){y[this.editorState.activeOption+e]&&(this.editorState.activeOption+=e),this.selectionText.setText("Click to Add: "+y[this.editorState.activeOption]).setFontSize(16)},t.prototype.updateSpriteSelection=function(e){e===this.editorState.activeCursor?this.editorState.activeCursor=null:this.editorState.activeCursor=e,this.refreshAlphas()},t.prototype.generateSprite=function(e){var t=e.x,o=e.y,i=e.key;return d.includes(i)?this.add.tileSprite(t,o,200,150,i).setInteractive():this.add.sprite(t,o,i).setScale(l.ASSET_SCALE_MAPPING[i]||1).setInteractive()},t.prototype.createSprite=function(e,t){var o=this,i=e.x,r=e.y,n=e.key;if(void 0===t&&(t=!1),!A.includes(n)||t){var s=this.generateSprite({x:i,y:r,key:n});return s.setDataEnabled(),console.log(s,n),s.data.set("key",n),s.on("pointerdown",(function(){return o.updateSpriteSelection(s)})),this.sprites.push(s),s}},t.prototype.create=function(){var t=this;e.prototype.create.call(this),this.cameras.main.setBounds(0,0,20*this.levelLayout.width,20*this.levelLayout.height),this.selectionText=this.add.text(window.innerWidth/2-150,555,"").setDepth(1e3).setScrollFactor(0).setInteractive().on("pointerdown",this.handleAddNewSprite).setBackgroundColor("black"),this.add.text(window.innerWidth/2-170,555,"<").setDepth(1500).setScrollFactor(0).setInteractive().on("pointerdown",(function(){return t.updateOptionSelection(-1)})).setBackgroundColor("black"),this.add.text(window.innerWidth/2+120,555,">").setDepth(1500).setScrollFactor(0).setInteractive().on("pointerdown",(function(){return t.updateOptionSelection(1)})).setBackgroundColor("black"),this.add.text(window.innerWidth-100,50,"Download").setDepth(1500).setScrollFactor(0).setInteractive().on("pointerdown",this.generateAndDownload).setBackgroundColor("black"),this.add.text(window.innerWidth-200,50,"Play").setDepth(1500).setScrollFactor(0).setInteractive().on("pointerdown",this.generateAndPlay).setBackgroundColor("black"),this.add.text(50,50,"Arrow to move camera \n 'Space' to remove  ").setDepth(1500).setScrollFactor(0),this.cursors.space.addListener("up",this.removeSelected),this.updateOptionSelection(0),this.createSprite(this.levelLayout.playerStart,!0),this.createSprite(this.levelLayout.finish,!0),this.updateSpriteSelection(null),this.input.mouse.enabled=!0;var o={camera:this.cameras.main,left:this.cursors.left,right:this.cursors.right,up:this.cursors.up,down:this.cursors.down,acceleration:.06,drag:5e-4,maxSpeed:1};this.controls=new Phaser.Cameras.Controls.SmoothedKeyControl(o)},t.prototype.update=function(e,t){this.editorState.activeCursor&&this.editorState.activeCursor.setX(this.input.mousePointer.worldX).setY(this.input.mousePointer.worldY),this.controls.update(t)},t}(a.AbstractScene);t.GameEditorScene=f},1473:function(e,t,o){"use strict";var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(t,"__esModule",{value:!0});var n=o(264),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.preload=function(){var e=this,t=this.add.graphics(),o=this.add.text(window.innerWidth/2,290,"").setFontSize(32).setFill("white");this.load.on("progress",(function(e){t.clear(),t.fillStyle(16777215,1),t.fillRect(0,270,window.innerWidth*e,60),e>.5&&o.setFill("black"),o.setText(parseInt(100*e)+"%")})),this.load.on("complete",(function(){t.destroy(),o.destroy()})),Object.keys(n.ASSETS_NAMES).forEach((function(t){return e.load.image(t.toLowerCase(),"assets/"+t.toLowerCase()+".png")})),Object.values(n.ASSETS_NAMES.GROUND).forEach((function(t){n.ASSET_WIDTH_MAPPING.GROUND[t]&&e.load.spritesheet(t,"assets/"+n.ASSETS_NAMES.GROUND.GROUND+".png",{frameWidth:n.ASSET_WIDTH_MAPPING.GROUND[t]})})),this.load.audio("background_music","assets/background_music.mp3")},t.prototype.create=function(){var e=this.levelLayout;this.cameras.main.setBounds(0,0,e.width,e.height),this.physics.world.setBounds(0,0,e.width,e.height),this.cursors=this.input.keyboard.createCursorKeys()},t}(Phaser.Scene);t.AbstractScene=s},264:function(e,t,o){"use strict";var i,r;Object.defineProperty(t,"__esModule",{value:!0}),t.GAME_HEIGHT=600,t.PLAYER={MAX_VELOCITY:500,ANGULAR_ACC:500,ACCELERATION:500,VELOCITY_Y:-800},t.ASSET_WIDTH={TINY:150,SMALL:200,MEDIUM:200,LARGE:300,OOH_BOI:900},t.ASSETS_NAMES={GROUND:{GROUND:"ground",TINY:"ground_tiny",SMALL:"ground_small",MEDIUM:"ground_medium",LARGE:"ground_large",OOH_BOI:"ground_ohh_boi"},PLAYER:"player",SPIKE:"spike",SHIBA:"shiba",STAR:"star",CLOUD:"cloud",FLAG:"flag"},t.ASSET_WIDTH_MAPPING={GROUND:(i={},i[t.ASSETS_NAMES.GROUND.TINY]=t.ASSET_WIDTH.TINY,i[t.ASSETS_NAMES.GROUND.SMALL]=t.ASSET_WIDTH.SMALL,i[t.ASSETS_NAMES.GROUND.MEDIUM]=t.ASSET_WIDTH.MEDIUM,i[t.ASSETS_NAMES.GROUND.LARGE]=t.ASSET_WIDTH.LARGE,i[t.ASSETS_NAMES.GROUND.OOH_BOI]=t.ASSET_WIDTH.OOH_BOI,i)},t.ASSET_SCALE_MAPPING=((r={})[t.ASSETS_NAMES.GROUND.GROUND]=1,r[t.ASSETS_NAMES.GROUND.TINY]=.2,r[t.ASSETS_NAMES.GROUND.SMALL]=.2,r[t.ASSETS_NAMES.GROUND.MEDIUM]=.2,r[t.ASSETS_NAMES.GROUND.LARGE]=.2,r[t.ASSETS_NAMES.GROUND.OOH_BOI]=.2,r[t.ASSETS_NAMES.PLAYER]=.25,r[t.ASSETS_NAMES.SHIBA]=.5,r[t.ASSETS_NAMES.STAR]=.15,r[t.ASSETS_NAMES.SPIKE]=.2,r[t.ASSETS_NAMES.CLOUD]=.3,r[t.ASSETS_NAMES.FLAG]=.2,r)},551:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=o(265),r=o(1469),n=o(1472),s={title:"Sample",type:i.AUTO,scene:location.href.includes("editor")?n.GameEditorScene:r.GameScene,scale:{mode:i.Scale.FIT,parent:"content",autoCenter:i.Scale.CENTER_BOTH,width:window.innerWidth,height:600},physics:{default:"arcade",arcade:{debug:location.href.includes("debug"),gravity:{y:300}}},parent:"game",backgroundColor:"#7dd7fb"};t.game=new i.Game(s)}});